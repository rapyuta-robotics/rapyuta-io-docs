= ROS publisher-subscriber

This tutorial will show you how to deploy a basic ROS package with a ROS publisher running in the cloud and a ROS subscriber running on a Raspberry Pi. 
The ROS publisher sits in a public git repository and is built into a docker container on the fly using `ros-indigo-catkin` build recipe.
The ROS subscriber is assumed to be downloaded on Raspberry Pi and is launched when the package is deployed using rapyuta.io console UI or SDK.

== Creating the package

TODO - Instert image
image::create_pkg.png["Creating the package"]

== Deploying the package
There are two possible ways of deplying the package: using the rapyuta.io console UI or the SDK.

=== Deploy the package from the rapyuta.io console UI
The instructions to follow are the same as shown in the link:../../getting_started/deploying_package.html[package deployment page]. The only difference
is that you should select different devides for the talker and listener components.

image::deploy_1.png["Available devices"]
image::deploy_2.png["Assign components to devices"]

=== Deploy the package from the rapyuta.io SDK
[source,python]
from rapyuta_io import Client
client = Client()
package_id = 'my_package_id'    # change with package_id you want to deploy
plan_id = 'my_plan_id'          # change with the plan_id you want to deploy
auth_token = 'my_auth_token'    # change with your auth_token
pkg = client.get_package(package_id=package_id, plan_id=plan_id, auth_token=auth_token)
deployment = pkg.provision(deployment_id=deployment_id)
deployment_info = pkg.get_deployment_info(deployment['deployment_id'])

=== Adding a ROSBridge to this deployment
If you want to add a ROSBridge from the service catalog to your application, you can do so by creating a new deployment of the ROSBridge package from the
service catalog and adding the *DeploymentID* of your previous section in the dependent deployments section of the package creation step. The lifecycle
of the entire deployment (ROSBridge + publisher + subscriber) through the new Deployment.
